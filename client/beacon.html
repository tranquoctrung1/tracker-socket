<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Beacon Management System</title>
        <link rel="stylesheet" href="./styles/beacon.css" />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
    </head>
    <body>
        <div class="container">
            <header>
                <h1><i class="fas fa-broadcast-tower"></i> Quản lý Beacon</h1>
            </header>

            <!-- Add Beacon Form -->
            <div class="form-section">
                <div class="df">
                    <button
                        class="btn btn-change"
                        onclick="onChangeMainPageClicked()"
                    >
                        Trang chính
                    </button>
                    <button
                        class="btn btn-change"
                        onclick="onChangeTrackerPageClicked()"
                    >
                        Quản lý tracker
                    </button>
                    <button
                        class="btn btn-change"
                        onclick="onChangeAlarmAreaPageClicked()"
                    >
                        Khai báo khu vực cánh báo
                    </button>
                </div>
                <h2>
                    <i class="fas fa-plus-circle"></i> Thêm mới thiết bị beacon
                </h2>
                <form id="beaconForm" class="beacon-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="beaconId">Beacon ID *</label>
                            <input
                                type="text"
                                id="beaconId"
                                name="beaconId"
                                required
                            />
                        </div>
                        <div class="form-group">
                            <label for="Floor">Tầng *</label>
                            <input
                                type="text"
                                id="Floor"
                                name="Floor"
                                required
                            />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="Room">Phòng *</label>
                            <select
                                id="Room"
                                name="Room"
                                required
                                onchange="onRoomChange(this)"
                            ></select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="x">Tọa độ X</label>
                            <input type="number" id="x" name="x" step="0.1" />
                        </div>
                        <div class="form-group">
                            <label for="y">Tọa độ Y</label>
                            <input type="number" id="y" name="y" step="0.1" />
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Thêm
                        </button>
                        <button
                            type="button"
                            id="cancelEdit"
                            class="btn btn-secondary"
                            style="display: none"
                        >
                            <i class="fas fa-times"></i> Hủy
                        </button>
                    </div>
                </form>
            </div>

            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-container">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Tìm kiếm"
                    />
                    <button id="searchBtn" class="btn btn-search">
                        <i class="fas fa-search"></i> Tìm kiếm
                    </button>
                    <button id="clearSearch" class="btn btn-clear">
                        <i class="fas fa-times"></i> Xóa hết
                    </button>
                </div>
            </div>

            <!-- Beacons List -->
            <div class="list-section">
                <h2><i class="fas fa-list"></i> Danh sách beacons</h2>
                <div class="table-container">
                    <table id="beaconsTable">
                        <thead>
                            <tr>
                                <th>Beacon ID</th>
                                <th>Tầng</th>
                                <th>Tọa độ X</th>
                                <th>Tọa độ Y</th>
                                <th>Phòng</th>
                                <th>#</th>
                            </tr>
                        </thead>
                        <tbody id="beaconsTableBody">
                            <!-- Beacon data will be loaded here -->
                        </tbody>
                    </table>
                </div>
                <div class="loading" id="loading">Đang tải...</div>
                <div class="no-data" id="noData" style="display: none">
                    Không có beaccon nào
                </div>
            </div>

            <!-- Statistics -->
            <div class="stats-section">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalBeacons">0</h3>
                        <p>Tất cả Beacons</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-layer-group"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalFloors">0</h3>
                        <p>Số tầng</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-door-open"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalRooms">0</h3>
                        <p>Số phòng</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmationModal" class="modal">
            <div class="modal-content">
                <h3>Đồng ý xóa</h3>
                <p>Xóa sẽ mất beacon và không thể phục hồi</p>
                <div class="modal-actions">
                    <button id="confirmDelete" class="btn btn-danger">
                        Xóa
                    </button>
                    <button id="cancelDelete" class="btn btn-secondary">
                        Hủy
                    </button>
                </div>
            </div>
        </div>
        <script src="./js/hostname.js"></script>
        <script src="./js/beacon.js"></script>
    </body>
</html>
